<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<title>Circles</title>
</head>
<style>
    * {
      margin: 0;
      padding: 0;
      background-color: #000;
      overflow: hidden;
    }
  </style>
<body>  
<body>
<canvas id="canvas" width="320" height="200">
This text is displayed if your browser does not support HTML5 Canvas.
</canvas>
<script type="text/javascript">
"use strict";
var canvas,
	ctx,
	width,
	height,
	tick = 0,
	colorCount = 10,	
	width = window.innerWidth,
	height = window.innerHeight,
	centerX = width / 2,
	centerY = height / 2,
	angulo = 0,
	numLinhas = 1,
	bolaPorLinha = 6;


function init() {
	canvas = document.getElementById("canvas");
	ctx = canvas.getContext("2d");	
  	canvas.width = width;
  	canvas.height =height;
	loop();
}

function loop() {
  requestAnimationFrame( loop );  
  draw();
}
 
 function corAtual() {
 	colorCount += 10;
 	return colorCount;
 }

function drawCircle (posX, posY, raio){
	ctx.beginPath();
	ctx.fillStyle = "hsla(" + ( corAtual() ) + ", 60%, 30%, 1 )";
	ctx.arc(posX, posY, raio, 0, Math.PI*2, true);		
	ctx.closePath();
	ctx.fill();
}

function draw() {
	
	var raio = 40;

	ctx.beginPath();	
  	ctx.fillStyle = "#000";
  	ctx.fillRect( 0, 0, width, height);  	  	
  	ctx.closePath();

  	drawCircle(centerX, centerY, raio);	
  	var fracaoAngulo = 360 / bolaPorLinha;
  	for (var numAngulo = 0; numAngulo <= 360; numAngulo += fracaoAngulo){

  		for (var iLinha = 1; iLinha <= numLinhas; iLinha++){
	  		drawCircle(
	  			centerX - (raio* 2 * iLinha ) * Math.cos(numAngulo * Math.PI / 180) ,
	  		 	centerY - (raio*2* iLinha)  * Math.sin(numAngulo * Math.PI / 180), 
	  		 	raio
			);

  		}	
  	}
  	  	
	angulo+=10;
	if (angulo >= 360){
		angulo = 0;
		numLinhas++;
		bolaPorLinha +=3;
	}

	ctx.save();
	 
  	ctx.translate(centerX, centerY); 
  	ctx.rotate(tick); // rotate  	
  	ctx.translate(-centerX, -centerY);	
  	tick++;
}

init();
</script>
</body>
</html>